from lxml import html
from icecream import ic

html_string = """
<div id="mArticle"><h2 id="kakaoBody" class="screen_out">1:1채팅</h2><div class="wrap_tit"><h3 class="tit_g">1:1채팅</h3><div class="info_use"><strong class="screen_out">1:1 채팅사용 여부 </strong><p class="txt_info disabled_g"><span class="txt_use emph_g">사용함</span><span><span class="txt_bar"></span> 월,화,수,목,금,토,일</span></p><a class="btn_g btn_g2 btn_h28" href="/_jvQUxj/chats/settings"><span class="ico_rocket ico_set"></span>채팅설정</a></div></div><div class="info_chat"><ul class="tab_g2"><li class="on"><a class="link_tab" href="/_jvQUxj/chats">전체 채팅목록</a></li><li class=""><a class="link_tab" href="/_jvQUxj/chats/starred">중요채팅 목록</a></li><li class=""><a class="link_tab" href="/_jvQUxj/chats/blocked">차단친구 목록</a></li></ul><strong class="screen_out">채팅목록</strong><div class="head_search"><div class="opt_g2 opt_g2"><div class="screen_out"></div><span class="screen_out">선택내용 : </span><button class=" btn_opt" type="button">진행 중 상담<span class="ico_rocket ico_arr"></span></button></div><div class="search_g "><form action="#"><fieldset><legend class="screen_out">채팅방 이름 검색 폼</legend><div class="box_tf "><input type="text" class="tf_g" placeholder="채팅방 이름 검색" name="keyword" value=""><button type="submit" class="btn_search"><span class="ico_rocket ico_search">검색</span></button></div></fieldset></form></div><button type="button" class="btn_filter">필터상세<span class="ico_rocket ico_arr"></span></button></div><div class="head_board"><button type="button" class="btn_g" style="width: 40px;"><span class="ico_rocket"></span>선택</button><button type="button" class="btn_g btn_add dimmed_g" disabled=""><span class="ico_rocket"></span>친구그룹에 추가</button><button type="button" class="btn_g btn_important dimmed_g" disabled=""><span class="ico_rocket ico_important"></span>중요표시</button><button type="button" class="btn_g btn_read dimmed_g" disabled="">읽음</button><button type="button" class="btn_g btn_charge dimmed_g" disabled="">담당자 지정</button><button type="button" class="btn_g btn_complete dimmed_g" disabled="">상담 완료하기</button><div class="common_btn"><button type="button" class="btn_g btn_out dimmed_g" disabled=""><span class="ico_rocket"></span>채팅방 나가기</button><button type="button" class="btn_g btn_block dimmed_g" disabled=""><span class="ico_rocket"></span>친구차단</button><button type="button" class="btn_help btn_help2"><span class="ico_rocket">1:1채팅 가이드 안내</span></button></div></div><div style="overflow: visible; width: 0px;"><div aria-label="grid" aria-readonly="true" class="ReactVirtualized__Grid ReactVirtualized__List list_board" role="grid" tabindex="0" style="box-sizing: border-box; direction: ltr; height: 1667px; position: relative; width: 940px; will-change: transform; overflow: hidden;"><div class="ReactVirtualized__Grid__innerScrollContainer" role="rowgroup" style="width: auto; height: 345px; max-width: 940px; max-height: 345px; overflow: hidden; position: relative;"><li style="height: 69px; left: 0px; position: absolute; top: 0px; width: 100%;"><div class="item_inp"><label for="chat-select-4874976633963735" class="lab_g"><span><input type="checkbox" id="chat-select-4874976633963735" class="inp_g" value=""><span class="ico_rocket ico_check"></span></span></label></div><div class="item_important"><button type="button" class="btn_important"><span class="ico_rocket ico_star">중요</span></button><div class="layer_tooltip" style="display: none;"><p>중요 표시된 채팅방입니다. 해제를 원하시면<br> 별표 아이콘을 클릭해 주세요.</p><span class="ico_arr"></span></div></div><a class="link_chat" style="cursor: pointer;"><div class="item_info"><span class="wrap_thumb"><img role="presentation" src="https://img1.daumcdn.net/thumb/C100x100.mplusfriend/?fname=https%3A%2F%2Ft1.kakaocdn.net%2Frocket%2Fcenter-statics%2F202305080947_851d8300_a1a86cf4a%2Fresources%2Fimages%2Fchatbot%2Fthumb_default.png" style="position: absolute; left: 0px; top: 0px; width: 40px; height: 40px;"></span><strong class="tit_info"><span class="txt_name">휘둥그레</span></strong><div class="bubble_g"><p class="txt_info">요청이 접수되었습니다.
■ 교체 안내메세지는 총 세차례 발송되며, 버튼은 한번만 눌러주셔도 접수가 완료됩니다.
■ 배송완료 메시지 수신 전까지 침구를 그대로 두어주시기 바랍니다.
■ 배송완료 메시지 수신 전까지 침구를 그대로 두어주시기 바랍니다.</p><span class="ico_arr"></span></div></div><span class="txt_date"><span>오전 8:37</span></span></a></li><li style="height: 69px; left: 0px; position: absolute; top: 69px; width: 100%;"><div class="item_inp"><label for="chat-select-4874977840082168" class="lab_g"><span><input type="checkbox" id="chat-select-4874977840082168" class="inp_g" value=""><span class="ico_rocket ico_check"></span></span></label></div><div class="item_important"><button type="button" class="btn_important"><span class="ico_rocket ico_star">중요</span></button><div class="layer_tooltip" style="display: none;"><p>중요 표시된 채팅방입니다. 해제를 원하시면<br> 별표 아이콘을 클릭해 주세요.</p><span class="ico_arr"></span></div></div><a class="link_chat" style="cursor: pointer;"><div class="item_info"><span class="wrap_thumb"><img role="presentation" src="https://img1.daumcdn.net/thumb/C100x100.mplusfriend/?fname=https%3A%2F%2Fp.kakaocdn.net%2Fth%2Ftalkp%2FwnUPnQr2F1%2FRk0T9VZkl5WinO9xu0MeS1%2Fk15r7b_110x110_c.jpg" style="position: absolute; left: 0px; top: 0px; width: 40px; height: 40px;"></span><strong class="tit_info"><span class="txt_name">Confront your fears</span></strong><div class="bubble_g"><p class="txt_info">요청이 접수되었습니다.
■ 교체 안내메세지는 총 세차례 발송되며, 버튼은 한번만 눌러주셔도 접수가 완료됩니다.
■ 배송완료 메시지 수신 전까지 침구를 그대로 두어주시기 바랍니다.
■ 배송완료 메시지 수신 전까지 침구를 그대로 두어주시기 바랍니다.</p><span class="ico_arr"></span></div></div><span class="txt_date"><span>오전 8:35</span></span></a></li><li style="height: 69px; left: 0px; position: absolute; top: 138px; width: 100%;"><div class="item_inp"><label for="chat-select-4871444861606939" class="lab_g"><span><input type="checkbox" id="chat-select-4871444861606939" class="inp_g" value=""><span class="ico_rocket ico_check"></span></span></label></div><div class="item_important"><button type="button" class="btn_important"><span class="ico_rocket ico_star">중요</span></button><div class="layer_tooltip" style="display: none;"><p>중요 표시된 채팅방입니다. 해제를 원하시면<br> 별표 아이콘을 클릭해 주세요.</p><span class="ico_arr"></span></div></div><a class="link_chat" style="cursor: pointer;"><div class="item_info"><span class="wrap_thumb"><img role="presentation" src="https://img1.daumcdn.net/thumb/C100x100.mplusfriend/?fname=https%3A%2F%2Fp.kakaocdn.net%2Fth%2Ftalkp%2FwnBuH76NBr%2Fby21vbC19TZenFlkgk7aU1%2Ftah89l_110x110_c.jpg" style="position: absolute; left: 0px; top: 0px; width: 40px; height: 40px;"></span><strong class="tit_info"><span class="txt_name">정윤식</span></strong><div class="bubble_g"><p class="txt_info">요청이 접수되었습니다.
■ 교체 안내메세지는 총 세차례 발송되며, 버튼은 한번만 눌러주셔도 접수가 완료됩니다.
■ 배송완료 메시지 수신 전까지 침구를 그대로 두어주시기 바랍니다.
■ 배송완료 메시지 수신 전까지 침구를 그대로 두어주시기 바랍니다.</p><span class="ico_arr"></span></div></div><span class="txt_date"><span>5월 15일</span></span></a></li><li style="height: 69px; left: 0px; position: absolute; top: 207px; width: 100%;"><div class="item_inp"><label for="chat-select-4874974916389081" class="lab_g"><span><input type="checkbox" id="chat-select-4874974916389081" class="inp_g" value=""><span class="ico_rocket ico_check"></span></span></label></div><div class="item_important"><button type="button" class="btn_important"><span class="ico_rocket ico_star">중요</span></button><div class="layer_tooltip" style="display: none;"><p>중요 표시된 채팅방입니다. 해제를 원하시면<br> 별표 아이콘을 클릭해 주세요.</p><span class="ico_arr"></span></div></div><a class="link_chat" style="cursor: pointer;"><div class="item_info"><span class="wrap_thumb"><img role="presentation" src="https://img1.daumcdn.net/thumb/C100x100.mplusfriend/?fname=https%3A%2F%2Fp.kakaocdn.net%2Fth%2Ftalkp%2FwnR1PWvxIn%2FFbghZfall1mNvAyYtkiIsk%2Fynwhej_110x110_c.jpg" style="position: absolute; left: 0px; top: 0px; width: 40px; height: 40px;"></span><strong class="tit_info"><span class="txt_name">H.jeong</span></strong><div class="bubble_g"><p class="txt_info">안녕하세욤</p><span class="ico_arr"></span></div></div><span class="txt_date"><span>5월 9일</span></span></a></li><li style="height: 69px; left: 0px; position: absolute; top: 276px; width: 100%;"><div class="item_inp"><label for="chat-select-4874974412274919" class="lab_g"><span><input type="checkbox" id="chat-select-4874974412274919" class="inp_g" value=""><span class="ico_rocket ico_check"></span></span></label></div><div class="item_important"><button type="button" class="btn_important"><span class="ico_rocket ico_star">중요</span></button><div class="layer_tooltip" style="display: none;"><p>중요 표시된 채팅방입니다. 해제를 원하시면<br> 별표 아이콘을 클릭해 주세요.</p><span class="ico_arr"></span></div></div><a class="link_chat" style="cursor: pointer;"><div class="item_info"><span class="wrap_thumb"><img role="presentation" src="https://img1.daumcdn.net/thumb/C100x100.mplusfriend/?fname=https%3A%2F%2Fp.kakaocdn.net%2Fth%2Ftalkp%2Fwnackx8h8s%2FcHx9oAsHQWJ8rkWUh3rBkK%2Fnh5qm3_110x110_c.jpg" style="position: absolute; left: 0px; top: 0px; width: 40px; height: 40px;"></span><strong class="tit_info"><span class="txt_name">동주</span></strong><div class="bubble_g"><p class="txt_info">회원가입 후 채널 웰컴 메시지 확인하였습니나. </p><span class="ico_arr"></span></div></div><span class="txt_date"><span>5월 9일</span></span></a></li></div></div></div><div class="resize-triggers"><div class="expand-trigger"><div style="width: 941px; height: 1839px;"></div></div><div class="contract-trigger"></div></div></div></div>
"""
# Parse the HTML string to an lxml HTML element
root = html.fromstring(html_string)
targets = []
# Select the desired elements
li_elements = root.xpath("//*[@id='mArticle']/div[2]/div[3]/div/div/li")
print(li_elements)
for li in li_elements:
    # Extract the text from elements with class 'txt_name', 'num_round', 'txt_date'
    txt_name = li.xpath(".//span[@class='txt_name']/text()")
    last_msg = li.xpath(".//p[@class='txt_info']/text()")
    num_round = li.xpath(".//span[@class='num_round']/text()")
    txt_date = li.xpath(".//span[@class='txt_date']/span/text()")
    a_link = li.xpath(".//a[@class='link_chat']")
    # ic(txt_name, num_round, txt_date)
    # num_round = [1]
    if num_round:
        targets.append({
            'txt_name': f"{txt_name[0] if txt_name else ''}",
            'num_round': f"{num_round[0] if num_round else ''}",
            'last_msg': f"{last_msg[0] if last_msg else ''}",
            'txt_date': f"{txt_date[0] if txt_date else ''}",
            'a_link': a_link
        })
        print(f"txt_name: {txt_name[0] if txt_name else ''}")
        print(f"num_round: {num_round[0] if num_round else ''}")
        print(f"last_msg: {last_msg[0] if last_msg else ''}")
        print(f"txt_date: {txt_date[0] if txt_date else ''}")
        print('-' * 50)
ic(targets)